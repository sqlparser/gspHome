<!DOCTYPE html>
<!--
    So Simple Jekyll Theme 3.1.1
    Copyright 2013-2018 Michael Rose - mademistakes.com | @mmistakes
    Free for personal and commercial use under the MIT license
    https://github.com/mmistakes/so-simple-theme/blob/master/LICENSE
-->
<html lang="en-US" class="no-js">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  

  
    
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Collect data lineage in Data Warehouses by analysis SQL script | General SQL Parser</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Collect data lineage in Data Warehouses by analysis SQL script" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Documents and demos for General SQL Parser" />
<meta property="og:description" content="Documents and demos for General SQL Parser" />
<link rel="canonical" href="http://support.sqlparser.com/gsp-demo-data-lineage.html" />
<meta property="og:url" content="http://support.sqlparser.com/gsp-demo-data-lineage.html" />
<meta property="og:site_name" content="General SQL Parser" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<script type="application/ld+json">
{"url":"http://support.sqlparser.com/gsp-demo-data-lineage.html","headline":"Collect data lineage in Data Warehouses by analysis SQL script","description":"Documents and demos for General SQL Parser","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  <script>
    /* Cut the mustard */
    if ( 'querySelector' in document && 'addEventListener' in window ) {
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + 'js';
    }
  </script>

  <link rel="stylesheet" href="/assets/css/main.css">
  
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,700,700i|Lora:400,400i,700,700i">
  <link rel="alternate" type="application/atom+xml" title="General SQL Parser" href="/atom.xml">
<!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

</head>


  <body class="layout--page  collect-data-lineage-in-data-warehouses-by-analysis-sql-script">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#primary-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    
  <div class="navigation-wrapper">
    <a href="#menu-toggle" id="menu-toggle">Menu</a>
    <nav id="primary-nav" class="site-nav animated drop">
      <ul><li><a href="/">Home</a></li><li><a href="/posts/">Posts</a></li><li><a href="/categories/">Categories</a></li><li><a href="/tags/">Tags</a></li><li><a href="/recipes/">Recipes</a></li><li><a href="/search/">Search</a></li><li><a href="http://www.sqlparser.com">GSP</a></li></ul>
    </nav>
  </div><!-- /.navigation-wrapper -->


    <header class="masthead">
  <div class="wrap">
    
    
      <h1 class="site-title animated fadeIn"><a href="/">General SQL Parser</a></h1>
      <p class="site-description animated fadeIn" itemprop="description">Documents and demos for General SQL Parser</p>
    
  </div>
</header><!-- /.masthead -->


    <main id="main" class="main-content" aria-label="Content">
  <article>
    

    <div class="page-wrapper">
      <header class="page-header">
        
        
          <h1 id="page-title" class="page-title">Collect data lineage in Data Warehouses by analysis SQL script</h1>
        
      </header>
      <div class="page-content">
        <p>This tool is aimed to collect data lineage information in Data Warehouses environment by analysis SQL script especially stored procedure like PL/SQL that used in a ETL process.</p>

<p>The result generated by this tool would be very useful to provide impact analysis feature to ETL mappings in data warehouses and marts.</p>

<p>Once we have such kind of data lineage in hand, we can do these kind of things easily:</p>

<ol>
  <li>Trace Data Lineage: find the path from the source to the target object that we selected.</li>
  <li>Data Impact Analysis: find out which data items in target database and/or applications are affected if we change one source object, like a column or a table or another source object.</li>
</ol>

<div id="entry-table-of-contents" class="toc-wrapper">
  <h2 id="toc-toggle" class="no_toc">
  Table of Contents <i class="toc-toggle-icon fas fa-chevron-down"></i>
</h2>
<ol id="markdown-toc">
  <li><a href="#run-this-tool" id="markdown-toc-run-this-tool">Run this tool</a></li>
  <li><a href="#how-this-tool-works" id="markdown-toc-how-this-tool-works">How this tool works</a></li>
  <li><a href="#supported-database-platform-and-sql-statement" id="markdown-toc-supported-database-platform-and-sql-statement">Supported database platform and SQL statement</a></li>
  <li><a href="#the-online-live-demo" id="markdown-toc-the-online-live-demo">The online live demo</a></li>
  <li><a href="#the-relationship-between-targetsource-columns" id="markdown-toc-the-relationship-between-targetsource-columns">The relationship between target/source columns</a>    <ol>
      <li><a href="#dataflow" id="markdown-toc-dataflow">Dataflow</a></li>
      <li><a href="#dataflow-depends-on-table-record-set" id="markdown-toc-dataflow-depends-on-table-record-set">Dataflow depends on table record set</a></li>
      <li><a href="#impact" id="markdown-toc-impact">Impact</a></li>
    </ol>
  </li>
</ol>

</div>

<h3 id="run-this-tool">Run this tool</h3>

<p>In order to run this tool, JRE 1.5 or higher need to be installed.  In command line, run java -Xms256m -Xmx1024m -jar DlineageDemo.jar</p>

<ol>
  <li>Select the database vendor from menu -&gt; Vendor</li>
  <li>Pickup the SQL script from menu -&gt; File -&gt; Load SQL Files, or just paste SQL query into the SQL editor.</li>
  <li>Click “Analyze” button in the tool bar.</li>
  <li>Result will be shown in the diagram window and data flow xml file will be generated under the output directory in the same directory of DlineageDemo.jar.</li>
</ol>

<h3 id="how-this-tool-works">How this tool works</h3>

<p>This tool is based on General SQL Parser and works in the following steps:</p>

<ol>
  <li>Analyze SQL script, build relationship among the source/taget table columns.</li>
  <li>Generate XML output describe the data flow from the source to target table/column.</li>
  <li>Visualize the XML result, make it easy to trace the data lineage and do data impact analysis.</li>
</ol>

<h3 id="supported-database-platform-and-sql-statement">Supported database platform and SQL statement</h3>

<p>Support those major database platforms: db2, greenplum, hana, hive, impala, informix, mysql, netezza, oracle, postgresql, redshift, sqlserver, sybase, teradata</p>

<ul>
  <li>SQL statements: DML(Insert,Delete,Update,Merge), DDL(create, alter)</li>
  <li>Stored procudure: Oracle PL/SQL, SQL Server T-SQL, DB2, PostgreSQL, Sybase.</li>
  <li>Teradata FastExport, MultiLoad script, BTEQ command.</li>
</ul>

<h3 id="the-online-live-demo">The online live demo</h3>

<p>You may give a try of the online dataflow <a href="http://107.170.101.241:8080/dataflow/" class="btn btn--info">live demo</a>, OR download the <a href="http://sqlparser.com/download.php" class="btn btn--info"> executable version</a> which includes more features and much faster to process huge SQL scripts (in order to run this tool, JRE 1.5 or higher need to be installed).</p>

<h3 id="the-relationship-between-targetsource-columns">The relationship between target/source columns</h3>

<p>There are three types of relationship between target and source columns in the generated result.</p>

<h5 id="dataflow">Dataflow</h5>

<p>The most common case is that value of the target column depends on the source column</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">view</span> <span class="n">vEmp</span><span class="p">(</span><span class="n">eName</span><span class="p">)</span> <span class="k">as</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">empName</span> <span class="nv">"eName"</span>
<span class="k">FROM</span> <span class="n">scott</span><span class="p">.</span><span class="n">emp</span> <span class="n">a</span>
<span class="k">Where</span> <span class="n">sal</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">vEmp.eName depends on scott.emp.empName.</code></p>

<h5 id="dataflow-depends-on-table-record-set">Dataflow depends on table record set</h5>

<p>The value of the target columns are influenced by a source table itself, for example by the number of records. This is caused by the use of aggregate function in the query.</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">view</span> <span class="n">vSal</span> <span class="k">as</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">deptno</span> <span class="nv">"Department"</span><span class="p">,</span> 
    <span class="n">a</span><span class="p">.</span><span class="n">num_emp</span><span class="o">/</span><span class="n">b</span><span class="p">.</span><span class="n">total_count</span> <span class="nv">"Employees"</span><span class="p">,</span> 
    <span class="n">a</span><span class="p">.</span><span class="n">sal_sum</span><span class="o">/</span><span class="n">b</span><span class="p">.</span><span class="n">total_sal</span> <span class="nv">"Salary"</span>
<span class="k">FROM</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="n">deptno</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">()</span> <span class="n">num_emp</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">SAL</span><span class="p">)</span> <span class="n">sal_sum</span>
        <span class="k">FROM</span> <span class="n">scott</span><span class="p">.</span><span class="n">emp</span>
       <span class="k">Where</span> <span class="n">city</span> <span class="o">=</span> <span class="s1">'NYC'</span>
       <span class="k">GROUP</span> <span class="k">BY</span> <span class="n">deptno</span><span class="p">)</span> <span class="n">a</span><span class="p">,</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">()</span> <span class="n">total_count</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">sal</span><span class="p">)</span> <span class="n">total_sal</span>
        <span class="k">FROM</span> <span class="n">scott</span><span class="p">.</span><span class="n">emp</span>
       <span class="k">Where</span> <span class="n">city</span> <span class="o">=</span> <span class="s1">'NYC'</span><span class="p">)</span> <span class="n">b</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">vSal.Salary</code> depends on the record number of table: <code class="highlighter-rouge">scott.emp</code>. This is due to the use of aggregate function <code class="highlighter-rouge">COUNT()</code>, <code class="highlighter-rouge">SUM()</code> in the query,  <code class="highlighter-rouge">vSal.Salary</code> depends on the <code class="highlighter-rouge">scott.emp.deptno column</code> which is used in the group by clause as well.</p>

<p>The <code class="highlighter-rouge">city</code> column in the where clause also determine the value of <code class="highlighter-rouge">vSal.Salary</code>. This is different from the impact which is discussed below that doesn’t influence the value of target columns.</p>

<h5 id="impact">Impact</h5>

<p>Some of the columns in source tables such as WHERE clause do not influence the value of target columns but are crucial for the selected row set, so they are also saved for impact analyses, with relationship to the target columns.</p>
<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">create</span> <span class="k">view</span> <span class="n">vEmp</span><span class="p">(</span><span class="n">eName</span><span class="p">)</span> <span class="k">as</span>
<span class="k">SELECT</span> <span class="n">a</span><span class="p">.</span><span class="n">empName</span> <span class="nv">"eName"</span>
<span class="k">FROM</span> <span class="n">scott</span><span class="p">.</span><span class="n">emp</span> <span class="n">a</span>
<span class="k">Where</span> <span class="n">sal</span> <span class="o">&gt;</span> <span class="mi">1000</span>
</code></pre></div></div>

<p>The value of <code class="highlighter-rouge">vEmp.eName</code> doesn’t depends on <code class="highlighter-rouge">scott.emp.sal</code>, but the number of records in the <code class="highlighter-rouge">vEmp</code> depends on the <code class="highlighter-rouge">scott.emp.sal</code>, so this tool record this kind of relationship as well.</p>


        
      </div>
    </div>
  </article>
</main>


    <footer id="footer" class="site-footer">
  <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
<div class="social-icons"><a class="social-icon" href="/atom.xml"><i class="fas fa-rss-square fa-2x" title="Feed"></i></a></div><div class="copyright">
    
      <p>&copy; 2018 General SQL Parser. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://github.com/mmistakes/so-simple-theme" rel="nofollow">So Simple</a>.</p>
    
  </div>
</footer>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
  <script src="/assets/js/main.min.js"></script>
  <script src="https://use.fontawesome.com/releases/v5.0.12/js/all.js"></script>


<!-- MathJax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  </body>

</html>
